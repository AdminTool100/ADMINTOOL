<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin ‚Äì Duy·ªát Ng∆∞·ªùi D√πng</title>
  <style>
    body {
      background-color: #000;
      font-family: 'Courier New', monospace;
      color: #00f0ff;
      padding: 20px;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h1 {
      text-shadow: 0 0 15px #00f0ff;
      font-size: 24px;
      margin-bottom: 20px;
    }

    .table-container {
      width: 100%;
      overflow-x: auto;
      border: 1px solid #00f0ff33;
      border-radius: 15px;
      box-shadow: 0 0 20px #00f0ff80;
    }

    table {
      width: 100%;
      min-width: 700px;
      background: rgba(0, 0, 0, 0.7);
      border-collapse: collapse;
    }

    th, td {
      padding: 12px 15px;
      text-align: center;
      border-bottom: 1px solid #00f0ff33;
      color: #00f0ff;
      white-space: nowrap;
    }

    th {
      background-color: rgba(0, 255, 255, 0.1);
      text-shadow: 0 0 5px #00f0ff;
    }

    tr:last-child td {
      border-bottom: none;
    }

    tr:hover {
      background-color: rgba(0, 255, 255, 0.05);
    }

    button {
      padding: 6px 12px;
      margin: 2px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      font-family: inherit;
      transition: transform 0.2s, box-shadow 0.3s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px white;
    }

    .duyet {
      background: #00ff99;
      color: #000;
      box-shadow: 0 0 10px #00ff99;
    }

    .xoa {
      background: #ff0040;
      color: #fff;
      box-shadow: 0 0 10px #ff0040;
    }

    .khoiphuc {
      background: #0099ff;
      color: #fff;
      box-shadow: 0 0 10px #0099ff;
    }
    
    .huyduyet {
        background: #f0ad4e;
        color: #fff;
        box-shadow: 0 0 10px #f0ad4e;
    }

    .status {
      font-weight: bold;
    }

    .approved {
      color: #00ff00;
      text-shadow: 0 0 5px #00ff00;
    }

    .pending {
      color: #ffaa00;
      text-shadow: 0 0 5px #ffaa00;
    }

    .no-users {
        padding: 40px;
        font-size: 1.2em;
        color: #ffaa00;
    }
  </style>
</head>
<body>
  <h1>üöÄ Tool Exercal ‚Äì Qu·∫£n L√Ω Duy·ªát Ng∆∞·ªùi D√πng</h1>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>STT</th>
          <th>T√™n Ng∆∞·ªùi D√πng</th>
          <th>Email</th>
          <th>Tr·∫°ng Th√°i</th>
          <th>Thao T√°c</th>
        </tr>
      </thead>
      <tbody id="userTable">
        </tbody>
    </table>
  </div>

  <script>
    // L·∫•y danh s√°ch ng∆∞·ªùi d√πng t·ª´ localStorage, n·∫øu kh√¥ng c√≥ th√¨ t·∫°o m·∫£ng r·ªóng
    let users = JSON.parse(localStorage.getItem("users")) || [];

    // H√†m ƒë·ªÉ l∆∞u l·∫°i danh s√°ch ng∆∞·ªùi d√πng v√†o localStorage
    function saveUsers() {
      localStorage.setItem("users", JSON.stringify(users));
    }

    // H√†m ƒë·ªÉ v·∫Ω l·∫°i b·∫£ng danh s√°ch ng∆∞·ªùi d√πng
    function renderTable() {
      const tableBody = document.getElementById("userTable");
      tableBody.innerHTML = ""; // X√≥a n·ªôi dung c≈© c·ªßa b·∫£ng

      // N·∫øu kh√¥ng c√≥ ng∆∞·ªùi d√πng n√†o, hi·ªÉn th·ªã th√¥ng b√°o
      if (users.length === 0) {
        tableBody.innerHTML = `<tr><td colspan="5" class="no-users">Ch∆∞a c√≥ ng∆∞·ªùi d√πng n√†o ƒëƒÉng k√Ω.</td></tr>`;
        return;
      }

      // L·∫∑p qua t·ª´ng ng∆∞·ªùi d√πng ƒë·ªÉ t·∫°o h√†ng trong b·∫£ng
      users.forEach((user, index) => {
        const isApproved = user.approved === "true";
        const statusClass = isApproved ? "approved" : "pending";
        const statusText = isApproved ? "‚úÖ ƒê√£ duy·ªát" : "‚è≥ Ch·ªù duy·ªát";

        // T·∫°o c√°c n√∫t h√†nh ƒë·ªông d·ª±a tr√™n tr·∫°ng th√°i c·ªßa ng∆∞·ªùi d√πng
        const actionButtons = `
            ${!isApproved 
              ? `<button class="duyet" onclick="toggleApproval(${index})">Duy·ªát</button>` 
              : `<button class="huyduyet" onclick="toggleApproval(${index})">H·ªßy Duy·ªát</button>`
            }
            <button class="khoiphuc" onclick="restorePassword(${index})">Kh√¥i ph·ª•c MK</button>
            <button class="xoa" onclick="deleteUser(${index})">Xo√°</button>
        `;

        // T·∫°o m·ªôt h√†ng m·ªõi v√† th√™m v√†o b·∫£ng
        const row = `
          <tr>
            <td>${index + 1}</td>
            <td>${user.username || "Kh√¥ng r√µ"}</td>
            <td>${user.email || "Kh√¥ng r√µ"}</td>
            <td class="status ${statusClass}">${statusText}</td>
            <td>${actionButtons}</td>
          </tr>`;
        
        tableBody.innerHTML += row;
      });
    }

    // H√†m ƒë·ªÉ thay ƒë·ªïi tr·∫°ng th√°i duy·ªát (Duy·ªát <-> H·ªßy duy·ªát)
    function toggleApproval(index) {
        const user = users[index];
        const isCurrentlyApproved = user.approved === "true";
        const actionText = isCurrentlyApproved ? 'H·ª¶Y DUY·ªÜT' : 'DUY·ªÜT';
        
        if (confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën ${actionText} t√†i kho·∫£n "${user.username}" kh√¥ng?`)) {
            user.approved = isCurrentlyApproved ? "false" : "true";
            saveUsers(); // L∆∞u l·∫°i thay ƒë·ªïi
            renderTable(); // V·∫Ω l·∫°i b·∫£ng ƒë·ªÉ c·∫≠p nh·∫≠t giao di·ªán
        }
    }

    // H√†m ƒë·ªÉ x√≥a ng∆∞·ªùi d√πng
    function deleteUser(index) {
      const user = users[index];
      if (confirm(`B·∫°n c√≥ ch·∫Øc mu·ªën XO√Å Vƒ®NH VI·ªÑN ng∆∞·ªùi d√πng "${user.username}" kh√¥ng? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.`)) {
        users.splice(index, 1); // X√≥a ng∆∞·ªùi d√πng kh·ªèi m·∫£ng
        saveUsers();
        renderTable();
      }
    }

    // H√†m ƒë·ªÉ xem l·∫°i m·∫≠t kh·∫©u
    function restorePassword(index) {
      const user = users[index];
      alert(`üîê M·∫≠t kh·∫©u c·ªßa t√†i kho·∫£n "${user.username}" l√†: ${user.password}`);
    }

    // Ch·∫°y h√†m renderTable() l·∫ßn ƒë·∫ßu ti√™n khi trang ƒë∆∞·ª£c t·∫£i
    renderTable();
  </script>
</body>
</html>
